unit cCadCategoria;

interface

uses System.Classes,
     Vcl.Controls,
     Vcl.ExtCtrls,
     System.SysUtils,
     Vcl.Dialogs;

type
  TCategoria = class
  private
  F_categoriaId : integer;  // propriedade semelhante ao do banco de dados int
  F_descricao : string;
    function getCodigo: Integer;
    function getDescricao: string;
    procedure setCodigo(const Value: Integer);
    procedure setDescicao(const Value: string);     // proprie semelhante ao do banco de dados descricao
  public
    constructor Create;
    destructor Destroy; override;
    function Inserir: Boolean;
    function Atualizar: Boolean;
    function Apagar: Boolean;
    function Selecionar (id:Integer): Boolean;

  published
    property codigo:Integer    read getCodigo    write setCodigo;
    property descricao:string  read getDescricao write setDescicao;

  end;

implementation

{ TCategoria }

uses uDM;

{$region 'Metodos para o Banco de dados'}
function TCategoria.Apagar: Boolean;
begin
  ShowMessage('apagado');
  Result := true;
end;

function TCategoria.Atualizar: Boolean;
begin
  ShowMessage('Atualizado');
   Result := true;
end;

function TCategoria.Inserir: Boolean;
begin
  with DM.QU do
  begin
    close;
    sql.Text := 'insert into categoria (descricao) values ( '+ quotedstr(Self.F_descricao)+')';
    open;
    //ShowMessage('Novo item adicionado com sucesso');
  end;

  //ShowMessage('Gravado');
  // Result := true;
  // ShowMessage(self.F_descricao);
  //ShowMessage(F_descricao);
end;

function TCategoria.Selecionar(id: Integer): Boolean;
begin
   Result := true;
end;

{$endregion}

{$region 'Constroí e destroi'}

constructor TCategoria.Create;
begin
  //ShowMessage('Fui criado'); só pra teste
end;

destructor TCategoria.Destroy;
begin
  //ShowMessage('Fui destruido'); só pra teste
  inherited;
end;

{$endregion}

{$region 'Gets'}

function TCategoria.getCodigo: Integer;
begin
  Result := Self.F_categoriaId;
end;

function TCategoria.getDescricao: string;
begin
  Result := Self.F_descricao;
end;

{$endregion}

{$region 'Sets'}
procedure TCategoria.setCodigo(const Value: Integer);
begin
  self.F_categoriaId := Value;
end;

procedure TCategoria.setDescicao(const Value: string);
begin
  self.F_descricao := Value;
end;

{$endregion}

end.
